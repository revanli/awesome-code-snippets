<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>binary-sort</title>
</head>
<body>
  
</body>
<script>
  // 冒泡排序，每次都将最大或者最小的值推至最前
  // 需要两个嵌套的循环，外层循环移动游标，内层循环遍历游标及之后（或之前）
  // 的元素，通过两两交换的方式，每次只确保内循环位置排序正确，然后内循环周期结束，
  // 然后外循环移动游标，开始下一轮循环
(function () {
  /******* 这里默认排序都是从小到大的排序 *******/

  // 交换元素部分
  function swap(i, j, array) {
    var temp = array[j];
    array[j] = array[i];
    array[i] = temp;
  }

  // 外循环正序，内循环正序，靠后元素位置先确定
  function bubbleSort1 (array) {
    var isSwap;   // 如果已经排好序则跳出标识
    var length = array.length;
    for (var i = 0; i < length; i++) {
      isSwap = false;
      for (var j = 0; j < length - 1 - i; j++) {
        if (array[j] > array[j+1]) {
          isSwap = true;
          swap(j, j+1, array);
        }
      }
      // 如果内部循环已经排好序则跳出外循环，排序结束
      if (!isSwap) {
        break;
      }
    }
    return array
  }

  // 外循环正序，内循环逆序， 靠前元素先确定
  function bubbleSort2 (array) {
    var isSwap;   // 如果已经排好序则跳出标识
    var length = array.length;
    for (var i = 0; i < length; i++) {
      isSwap = false;
      for (var j = length - 1; j >= i + 1; j--) {
        if (array[j] < array[j-1]) {
          isSwap = true;
          swap(j, j-1, array);
        }
      }
      // 如果内部循环已经排好序则跳出外循环，排序结束
      if (!isSwap) {
        break;
      }
    }
    return array
  }

  // 外循环逆序，内循环正序，靠后排序的位置先确定
  function bubbleSort3 (array) {
    var isSwap;   // 如果已经排好序则跳出标识
    var length = array.length;
    for (var i = length - 1; i >= 0; i--) {
      isSwap = false;
      for (var j = 0; j < i; j++) {
        if (array[j] > array[j+1]) {
          isSwap = true;
          swap(j, j+1, array);
        }
      }
      // 如果内部循环已经排好序则跳出外循环，排序结束
      if (!isSwap) {
        break;
      }
    }
    return array
  }

  // 外循环逆序，内循环逆序，靠前排序的位置先确定
  function bubbleSort4 (array) {
    var isSwap;   // 如果已经排好序则跳出标识
    var length = array.length;
    for (var i = length - 1; i >= 0; i--) {
      isSwap = false;
      for (var j = length - 1; j >= length - 1 - i; j--) {
        if (array[j] < array[j-1]) {
          isSwap = true;
          swap(j, j-1, array);
        }
      }
      // 如果内部循环已经排好序则跳出外循环，排序结束
      if (!isSwap) {
        break;
      }
    }
    return array
  }

  // 双向冒泡排序
  function bothwayBubbleSort (array) {
    var tail = array.length - 1, isSwap = false;
    for (var i = 0; i < tail; tail--) {
      for (var j = tail; j > i; j--) {
        if (array[j-1] > array[j]) {
          isSwap = true;
          swap(j, j-1, array);
        }
      }
      console.log('i'+ i, array)
      i++;
      for (j = i; j < tail; j++) {
        if (array[j] > array[j+1]) {
          isSwap = true;
          swap(j, j+1, array);
        }
      }
      console.log('j'+ j, array)
    }
    return array;
  }

  // console.log(bubbleSort([21, 4, 26, 18, 32, 54, 47, 9, 15, 48]))
  // console.log(bubbleSort2([21, 4, 26, 18, 32, 54, 47, 9, 15, 48]))
  // console.log(bubbleSort1([21, 4, 26, 18, 32, 54, 47, 9, 15, 48]))
  // console.log(bubbleSort2([21, 4, 26, 18, 32, 54, 47, 9, 15, 48]))
  // console.log(bubbleSort3([21, 4, 26, 18, 32, 54, 47, 9, 15, 48]))
  // console.log(bubbleSort4([21, 4, 26, 18, 32, 54, 47, 9, 15, 48]))
  console.log(bothwayBubbleSort([21, 4, 26, 18, 32, 54, 47, 9, 15, 48]))
})()
</script>
</html>